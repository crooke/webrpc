{{define "body"}}
{{- range .Services}}
<h2>Methods</h2>
{{range .Methods}}
<section id="{{.Name}}">
   <h3>{{.Name}}</h3>
   <h4>Request</h4>
   <ul>
    {{- range .Inputs }}
    <li>{{.Name}} ({{.Type}}) {{- if not .Optional}}<span class="text-danger"> required</span>{{end -}}</li>
    {{- end}}
   </ul>
   <h4>Response</h4>
   {{- range .Outputs}}
   <ul>
    <li>{{ .Name }} ({{ if .Type.Struct}}<a href="#{{.Type.Struct.Name}}">{{.Type}}</a>{{else}}{{.Type}}{{end}})</li>
   </ul>
   {{- end }}
   <h4>Try It</h4>
   <form id="{{.Name}}-form" data-rpc-method="{{.Name}}">
    {{- range .Inputs }}
    <label>{{.Name}}
    <input type="{{. | methodArgType}}" name="{{.Name}}" {{if not .Optional}}required{{end}}/>
    </label>
    <br/>
    {{- end}}
    <input type="submit" />
   </form>
   <pre id="{{.Name}}-success" class="alert alert-success" role="alert" hidden></pre>
   <pre id="{{.Name}}-error" class="alert alert-danger" role="alert" hidden></pre>
</section>
{{end}}
{{- end}}
<section>
  <h2>Models</h2>
  {{- if .Messages -}}
  {{range .Messages -}}
  <h4 id="{{.Name | interfaceName}}">{{.Name | interfaceName}}</h4>
    <ul>
    {{$msgType := .Type}}
    {{- range .Fields}}
    {{if . | exportableField}}
    <li>{{. | exportedJSONField}}{{if .Optional}}?{{end}} {{if $msgType | isStruct}}({{ if .Type.Struct}}<a href="#{{.Type.Struct.Name}}">{{.Type}}</a>{{else}}{{.Type}}{{end}}){{end}}</li>
    {{- end -}}
    {{- end}}
    </ul>
  {{end -}}
  {{end -}}
</section>
{{end}}
